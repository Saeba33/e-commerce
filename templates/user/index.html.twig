{% extends 'base.html.twig' %}

{% block title %}Admin user
{% endblock %}

{% block body %}
	<div class="bg-base-100 py-8 px-4">
		<div class="max-w-6xl mx-auto">
			<div class="content-container">
				<h1 class="text-3xl font-bold text-center mb-8">Liste des utilisateurs</h1>

				{% include 'layouts/_flash_message.html.twig' %}

				<div class="card bg-base-100 shadow-xl">
					<div class="card-body p-0">
						<div class="overflow-x-auto">
							<table class="table table-zebra">
								<thead class="bg-base-200">
									<tr>
										<th class="text-center">ID</th>
										<th>Nom</th>
										<th>Prénom</th>
										<th>E-mail</th>
										<th class="text-center">Rôle</th>
										<th class="text-center">Actions</th>
									</tr>
								</thead>
								<tbody>
									{% for user in users %}
										<tr class="hover:bg-base-50 transition-colors duration-200">
											<td class="text-center font-mono">#{{ user.id }}</td>
											<td class="font-medium">{{ user.lastname }}</td>
											<td class="font-medium">{{ user.firstname }}</td>
											<td>{{ user.email }}</td>
											<td class="text-center">
												<span class="badge badge-primary">
													{% if 'ROLE_ADMIN' in user.roles %}
														Administrateur
													{% elseif 'ROLE_EDITOR' in user.roles %}
														Éditeur
													{% else %}
														Client
													{% endif %}
												</span>
											</td>
											<td>
												<div class="flex justify-center gap-2 flex-wrap">
													{% if 'ROLE_ADMIN' not in user.roles %}
														{% if 'ROLE_EDITOR' not in user.roles %}
															<a onclick="return confirm('Voulez vous vraiment affecter ce rôle à cet utilisateur ?')" class="custom-btn new-btn" href="{{ path('app_user_add_role_editor', {'id': user.id}) }}">

																<ion-icon name="add-outline"></ion-icon>
																Ajouter rôle éditeur
															</a>
														{% else %}
															<a onclick="return confirm('Voulez vous vraiment retirer ce rôle à cet utilisateur ?')" class="custom-btn edit-btn" href="{{ path('app_user_remove_role_editor', {'id': user.id}) }}">

																<ion-icon name="create-outline"></ion-icon>
																Retirer rôle éditeur
															</a>
														{% endif %}
														<a onclick="return confirm('Voulez vous vraiment supprimer cet utilisateur ?')" href="{{ path('app_user_delete', {'id': user.id}) }}" class="custom-btn delete-btn">

															<ion-icon name="trash-outline"></ion-icon>
															Supprimer
														</a>
													{% endif %}
												</div>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	{% endblock %}
