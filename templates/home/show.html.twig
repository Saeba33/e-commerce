{% extends 'base.html.twig' %}

{% block title %}
	{{ product.name }}
{% endblock %}

{% block body %}
	<div class="container mx-auto px-4 py-8 max-w-6xl">
		<div class="bg-white rounded-2xl shadow-2xl overflow-hidden mb-12">
			<div class="grid lg:grid-cols-2 gap-0">

				<div class="relative p-8 lg:p-12">
					<div class="aspect-square rounded-xl overflow-hidden shadow-lg bg-white">
						{% if product.image %}
							<img src="{{ asset('uploads/images/'~product.image)}}" alt="{{ product.name }}" class="w-full h-full object-cover"/>
						{% else %}
							<div class="w-full h-full flex flex-col items-center justify-center bg-gray-100">
								<ion-icon name="image-outline" class="text-8xl text-gray-300 mb-4"></ion-icon>
								<span class="text-gray-400 font-medium">Aucune image disponible</span>
							</div>
						{% endif %}
					</div>
				</div>

				<div class="p-8 lg:p-12 flex flex-col justify-center">
					<div class="mb-6">
						<h1 class="text-4xl lg:text-5xl font-bold text-gray-800 mb-4 leading-tight">{{ product.name }}</h1>

						{% if product.subCategory.first %}
							<div class="flex flex-wrap gap-2 mb-6">
								<span class="bg-blue-100 text-blue-800 text-sm font-medium px-4 py-2 rounded-full">
									{{ product.subCategory.first.name }}
								</span>
								<span class="bg-gray-100 text-gray-600 text-sm font-medium px-4 py-2 rounded-full">
									{{ product.subCategory.first.category.name }}
								</span>
							</div>
						{% endif %}
					</div>

					<div class="mb-8">
						<p class="text-gray-600 text-lg leading-relaxed">{{ product.description }}</p>
					</div>

					<div class="mb-8">
						<span class="text-4xl font-bold text-gray-900">{{ product.price }}€</span>
					</div>

					<div class="mb-8">
						<label class="block text-sm font-medium text-gray-700 mb-3">Quantité</label>
						<div class="flex items-center gap-4">
							<div class="flex items-center bg-gray-50 rounded-lg border border-gray-200">
								<button class="p-3 hover:bg-gray-100 transition-colors rounded-l-lg">
									<ion-icon name="remove-outline" class="text-lg text-gray-600"></ion-icon>
								</button>
								<input type="number" value="1" min="1" class="w-16 text-center bg-transparent border-0 focus:ring-0 font-medium">
								<button class="p-3 hover:bg-gray-100 transition-colors rounded-r-lg">
									<ion-icon name="add-outline" class="text-lg text-gray-600"></ion-icon>
								</button>
							</div>
						</div>
					</div>

					<button class=" text-white font-semibold py-4 px-8 rounded-xl shadow-lg flex items-center justify-center gap-3 text-lg btn btn-success btn-lg">
						<ion-icon name="cart-outline" class="text-xl"></ion-icon>
						Ajouter au panier
					</button>
				</div>
			</div>
		</div>

		<div class="mb-8">
			<h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Derniers produits ajoutés</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
				{% for recentProduct in products %}
					<div class="group bg-white hover:bg-gray-50 transition-all duration-200 p-5 rounded-lg border border-gray-100 hover:border-gray-200 hover:shadow-lg grid grid-rows-[auto_1fr_auto_auto_auto] min-h-[400px]">
						<div class="relative aspect-square mb-3 overflow-hidden rounded-lg bg-gray-50">
							{% if recentProduct.image %}
								<img src="{{ asset('uploads/images/' ~ recentProduct.image) }}" alt="{{ recentProduct.name }}" class="w-full h-full object-cover transition-transform duration-200">
							{% else %}
								<div class="w-full h-full flex flex-col items-center justify-center bg-gray-100">
									<ion-icon name="image-outline" class="text-4xl text-gray-300 mb-2"></ion-icon>
									<span class="text-xs text-gray-400 font-medium">Aucune image disponible</span>
								</div>
							{% endif %}

							{% if recentProduct.subCategory.first %}
								<div class="absolute top-2 left-2">
									<span class="bg-gray-100 text-gray-700 text-xs font-medium px-3 py-1 rounded-full border border-gray-200 shadow-sm backdrop-blur-sm">
										{{ recentProduct.subCategory.first.category.name }}
									</span>
								</div>
							{% endif %}
						</div>

						<div class="flex items-center justify-between gap-3 mb-2">
							<a href="{{ path('app_home_product_show', {'id': recentProduct.id})}}" class="font-medium text-gray-900 hover:text-blue-600 transition-colors flex-1 leading-tight">
								{{ recentProduct.name }}
							</a>
							<span class="text-lg font-bold text-gray-900 flex-shrink-0">{{ recentProduct.price }}€</span>
						</div>

						<div class="h-10 mb-4">
							{% if recentProduct.description %}
								<p class="text-sm text-gray-500 line-clamp-2 leading-relaxed">
									{{ recentProduct.description | slice(0,50) }}
									{% if recentProduct.description|length > 50 %}...
									{% endif %}
								</p>
							{% endif %}
						</div>

						<div class="flex-1"></div>

						<div class="flex items-center justify-between pt-2 mb-4">
							<span class="text-sm text-gray-600 font-medium">Quantité:</span>
							<div class="flex items-center gap-2">
								<button class="w-7 h-7 rounded border border-gray-300 flex items-center justify-center text-sm text-gray-600 hover:bg-gray-100 hover:border-gray-400 transition-all font-medium">-</button>
								<span class="w-8 text-center text-sm font-medium">1</span>
								<button class="w-7 h-7 rounded border border-gray-300 flex items-center justify-center text-sm text-gray-600 hover:bg-gray-100 hover:border-gray-400 transition-all font-medium">+</button>
							</div>
						</div>

						<button class="btn btn-success btn-sm w-full text-white font-medium hover:btn-success">
							<ion-icon name="cart-outline" class="text-base"></ion-icon>
							Ajouter au panier
						</button>
					</div>
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
