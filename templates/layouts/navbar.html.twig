{% block body %}
	<div class="navbar bg-slate-800 navbar-custom px-6 py-4">
		<div
			class="navbar-start">
			{# Version Mobile #}
			<div class="dropdown">
				<div tabindex="0" role="button" class="btn btn-ghost btn-circle lg:hidden">
					<svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
					</svg>
				</div>
				<ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-50 w-52 p-2 shadow-lg mt-3">
					<li>
						<a href="{{ path('app_home') }}">Accueil</a>
					</li>

					{% if categories is defined and categories|length > 0 %}
						<li>
							<details>
								<summary>Catégories</summary>
								<ul class="z-[9999] max-h-96 overflow-y-auto">
									{% for category in categories %}
										<li>
											<span class="font-semibold text-primary cursor-default px-2 py-1">{{ category.name }}</span>
										</li>
										{% for subCategory in category.subCategories %}
											<li>
												<a href="{{ path('app_home_product_filter', {'id': subCategory.id}) }}" class="pl-6 text-gray-600 hover:text-primary transition-colors">
													{{ subCategory.name }}
												</a>
											</li>
										{% endfor %}
										{% if not loop.last %}
											<li><hr class="my-1 border-gray-200"></li>
										{% endif %}
									{% endfor %}
								</ul>
							</details>
						</li>
					{% endif %}

					{% if is_granted("ROLE_ADMIN") %}
						<li>
							<details>
								<summary>Admin</summary>
								<ul class="z-[9999]">
									<li>
										<a href="{{ path('app_category') }}">Gérer les catégories</a>
									</li>
									<li>
										<a href="{{ path('app_sub_category') }}">Gérer les sous-catégories</a>
									</li>
									<li>
										<a href="{{ path('app_product') }}">Gérer les produits</a>
									</li>
									<li>
										<a href="{{ path('app_user') }}">Gérer les utilisateurs</a>
									</li>
								</ul>
							</details>
						</li>
					{% endif %}

					{% if app.user %}
						<li>
							<a href="{{ path('app_logout') }}" class="custom-btn-with-logo logout-btn">

								<ion-icon name="log-out-outline"></ion-icon>
								Se déconnecter
							</a>
						</li>
					{% else %}
						<li>
							<a href="{{ path('app_register') }}" class="custom-btn-with-logo register-btn">


								<ion-icon name="person-add-outline"></ion-icon>
								S'inscrire
							</a>
						</li>
						<li>
							<a href="{{ path('app_login') }}" class="custom-btn-with-logo login-btn">


								<ion-icon name="log-in-outline"></ion-icon>
								Se connecter
							</a>
						</li>
					{% endif %}
				</ul>
			</div>
			{# Nom du site #}
			<a href="{{ path('app_home') }}" class="text-2xl font-bold text-white hover:text-gray-300">E-shop</a>
		</div>

		{# Version Desktop #}
		<div class="navbar-center hidden lg:flex">
			<ul class="menu lg:menu-horizontal rounded-box">
				<li>
					<a href="{{ path('app_home') }}" class="text-white">
						Accueil
					</a>
				</li>

				{% if categories is defined and categories|length > 0 %}
					<li>
						<details>
							<summary class="text-white">
								Catégories
							</summary>
							<ul class="w-64 whitespace-nowrap bg-base-100 shadow-lg max-h-96 overflow-y-auto">
								{% for category in categories %}
									<li>
										<span class="font-semibold text-primary cursor-default px-4 py-2 block border-l-4 border-primary bg-gray-50">
											{{ category.name }}
										</span>
									</li>
									{% for subCategory in category.subCategories %}
										<li>
											<a href="{{ path('app_home_product_filter', {'id': subCategory.id}) }}" class="pl-8 pr-4 py-2 text-gray-600 hover:text-primary hover:bg-gray-100 transition-all duration-200 block">
												{{ subCategory.name }}
											</a>
										</li>
									{% endfor %}
									{% if not loop.last %}
										<li><hr class="my-2 border-gray-200"></li>
									{% endif %}
								{% endfor %}
							</ul>
						</details>
					</li>
				{% endif %}
				{% if is_granted("ROLE_ADMIN") %}
					<li>
						<details>
							<summary class="text-white">
								Admin
							</summary>
							<ul class="w-52 whitespace-nowrap z-[9999]">
								<li>
									<a href="{{ path('app_category') }}" class="text-nowrap">Gérer les catégories</a>
								</li>
								<li>
									<a href="{{ path('app_sub_category') }}" class="text-nowrap">Gérer les sous-catégories</a>
								</li>
								<li>
									<a href="{{ path('app_product') }}" class="text-nowrap">Gérer les produits</a>
								</li>
								<li>
									<a href="{{ path('app_user') }}" class="text-nowrap">Gérer les utilisateurs</a>
								</li>
							</ul>
						</details>
					</li>
				{% endif %}
			</ul>
		</div>

		{# Section droite : recherche et connexion #}
		<div class="navbar-end">
			<div
				class="flex items-center gap-4">
				{# Barre de recherche - cachée sur mobile, visible sur tablette+ #}
				<div class="hidden md:block">
					<label class="search-style">
						<ion-icon name="search-outline" class="search-icon"></ion-icon>
						<input type="search" required placeholder="Rechercher ..." class="border-none" autocomplete="off"/>
					</label>
				</div>

				{# Bouton de recherche mobile #}
				<div class="md:hidden">
					<button class="btn btn-ghost btn-circle search-btn-mobile" onclick="toggleMobileSearch()">
						<ion-icon name="search-outline" class="text-xl"></ion-icon>
					</button>
				</div>

				{# Boutons de connexion/déconnexion & inscription #}
				{% if app.user %}
					<a href="{{ path('app_logout') }}" class="custom-btn-with-logo logout-btn">


						<ion-icon name="log-out-outline"></ion-icon>
						Se déconnecter
					</a>
				{% else %}
					<div class="hidden lg:flex gap-3 px-4">
						<a href="{{ path('app_register') }}" class="custom-btn-with-logo register-btn">


							<ion-icon name="person-add-outline"></ion-icon>
							S'inscrire
						</a>
						<a href="{{ path('app_login') }}" class="custom-btn-with-logo login-btn">


							<ion-icon name="log-in-outline"></ion-icon>
							Se connecter
						</a>
					</div>
				{% endif %}
			</div>
		</div>
	</div>

	{# Barre de recherche mobile  #}
	<div id="mobileSearch" class="hidden md:hidden bg-base-200 px-6 py-4 border-t border-base-300">
		<label class="search-style w-full">
			<ion-icon name="search-outline" class="search-icon"></ion-icon>
			<input type="search" required placeholder="Rechercher ..." class="border-none" autocomplete="off"/>
		</label>
	</div>

{% endblock %}
