{% extends 'base.html.twig' %}

{% block title %}Recherche
{% endblock %}


{% block body %}
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
		<header class="mb-6">
			<h1 class="text-2xl font-semibold text-gray-900">Résultat pour "<span class="text-primary">{{ word }}</span>"</h1>
			<p class="text-sm text-gray-500 mt-1">{{ products|length }}
				produit{{ products|length > 1 ? 's' : '' }}
				trouvé{{ products|length > 1 ? 's' : '' }}</p>
		</header>

		{% if products is empty %}
			<div class="bg-white p-6 rounded-lg shadow-sm text-center">
				<p class="text-gray-600">Aucun produit ne correspond à votre recherche.</p>
				<a href="{{ path('app_home') }}" class="inline-block mt-4 text-primary underline">Retour à l'accueil</a>
			</div>
		{% else %}
			<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
				{% for product in products %}
					<div class="group bg-white hover:bg-gray-50 transition-all duration-200 p-5 rounded-lg border border-gray-100 hover:border-gray-200 shadow-lg grid grid-rows-[auto_1fr_auto_auto_auto] min-h-[400px] hover:translate-y-[-2px]">
						<div class="relative aspect-square mb-3 overflow-hidden rounded-lg bg-gray-50">
							{% if product.image %}
								<img src="{{ asset('uploads/images/' ~ product.image) }}" alt="{{ product.name }}" class="w-full h-full object-cover transition-transform duration-200">
							{% else %}
								<div class="w-full h-full flex flex-col items-center justify-center bg-gray-100">
									<ion-icon name="image-outline" class="text-4xl text-gray-300 mb-2"></ion-icon>
									<span class="text-xs text-gray-400 font-medium">Aucune image disponible</span>
								</div>
							{% endif %}
						</div>

						<div class="flex items-center justify-between gap-3 mb-2">
							<a href="{{ path('app_home_product_show', {'id': product.id})}}" class="font-medium text-gray-900 hover:text-blue-600 transition-colors flex-1 leading-tight">
								{{ product.name }}
							</a>
							<span class="text-lg font-bold text-gray-900 flex-shrink-0">{{ product.price }}€</span>
						</div>

						<div class="h-10 mb-4">
							{% if product.description %}
								<p class="text-sm text-gray-500 line-clamp-2 leading-relaxed">
									{{ product.description | slice(0,50) }}
									{% if product.description|length > 50 %}...
									{% endif %}
								</p>
							{% endif %}
						</div>

						<div class="flex-1"></div>

						<div class="flex items-center justify-between pt-2 mb-4">
							<span class="text-sm text-gray-600 font-medium">Quantité:</span>
							<div class="flex items-center gap-2">
								<button class="w-7 h-7 rounded border border-gray-300 flex items-center justify-center text-sm text-gray-600 hover:bg-gray-100 hover:border-gray-400 transition-all font-medium">-</button>
								<span class="w-8 text-center text-sm font-medium">0</span>
								<button class="w-7 h-7 rounded border border-gray-300 flex items-center justify-center text-sm text-gray-600 hover:bg-gray-100 hover:border-gray-400 transition-all font-medium">+</button>
							</div>
						</div>

						<a href="{{ path('app_cart_add', {'id': product.id}) }}" class="btn btn-success btn-sm w-full text-white font-medium hover:btn-success">
							<ion-icon name="cart-outline" class="text-base"></ion-icon>
							Ajouter au panier
						</a>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	</div>

{% endblock %}
